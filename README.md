# üèóÔ∏è –°–∏—Å—Ç–µ–º–∞ –ü—Ä–æ–≤–µ—Ä–∫–∏ –°–º–µ—Ç –ü–ò–†

–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–º–µ—Ç –Ω–∞ –ø—Ä–æ–µ–∫—Ç–Ω–æ-–∏–∑—ã—Å–∫–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ä–∞–±–æ—Ç—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º AI –∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –°–¶–ü (–°–±–æ—Ä–Ω–∏–∫ –¶–µ–Ω –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è) –†–µ—Å–ø—É–±–ª–∏–∫–∏ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Å–º–µ—Ç (PDF –∏–ª–∏ JSON)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ –±–∞–∑–µ –°–¶–ü –∑–∞ 2019-2025 –≥–æ–¥—ã (4,577 —Ç–∞–±–ª–∏—Ü)
- ‚úÖ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤ —Å—Ç–∞–¥–∏–π–Ω–æ—Å—Ç–∏ –∏ —É—Å–ª–æ–≤–∏–π
- ‚úÖ –†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø–æ —Ñ–æ—Ä–º—É–ª–µ C = a + b √ó V
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≥–æ–¥–∞ –°–¶–ü –∏–∑ —Ç–µ–∫—Å—Ç–∞
- ‚úÖ REST API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

## üöÄ –ë—ã—Å—Ç—Ä—ã–π –°—Ç–∞—Ä—Ç

### –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã:
```bash
cd /workspace/agentic
./manage.sh start
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:
```bash
./status.sh
```

### –ó–∞–≥—Ä—É–∑–∫–∞ PDF –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
```bash
# Traditional (tabula-based, fast)
curl -X POST http://127.0.0.1:8000/predict_pdf \
  -F "file=@your_smeta.pdf" \
  -o result.json

# OCR-based (VLM, higher accuracy)
curl -X POST http://127.0.0.1:8000/predict_pdf_ocr \
  -F "file=@your_smeta.pdf" \
  -o result.json
```

## üìä API Endpoints

### 1. POST /predict_pdf (Traditional)
–ó–∞–≥—Ä—É–∑–∫–∞ PDF —Ñ–∞–π–ª–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —á–µ—Ä–µ–∑ tabula.


**–ó–∞–ø—Ä–æ—Å:**
```bash
curl -X POST http://127.0.0.1:8000/predict_pdf \
  -F "file=@smeta.pdf"
```

### 2. POST /predict_pdf_ocr (OCR-based, Recommended)
–ó–∞–≥—Ä—É–∑–∫–∞ PDF –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —á–µ—Ä–µ–∑ Vision Language Model (VLM).


**–ó–∞–ø—Ä–æ—Å:**
```bash
curl -X POST http://127.0.0.1:8000/predict_pdf_ocr \
  -F "file=@smeta.pdf"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "filename": "smeta.pdf",
  "processing_method": "vlm_ocr",
  "tables_processed": 2,
  "results": [
    {
      "table_index": 1,
      "page_number": 1,
      "status": "success",
      "output": {...},
      "ocr_metadata": {
        "processing_time_ms": 1234.5,
        "raw_text": "..."
      }
    }
  ]
}
```

### 3. POST /predict
–ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤—ã—Ö JSON –¥–∞–Ω–Ω—ã—Ö (—Ñ–æ—Ä–º–∞—Ç tabula).

## üóÑÔ∏è –ë–∞–∑–∞ –î–∞–Ω–Ω—ã—Ö

**MongoDB Atlas:** scp_verification_dev

**–ö–æ–ª–ª–µ–∫—Ü–∏–∏:**
- `tables` - 4,577 —Ç–∞–±–ª–∏—Ü –°–¶–ü (2019-2025)
- `coefficients` - 339 –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤
- `formulas` - 3 —Ñ–æ—Ä–º—É–ª—ã —Ä–∞—Å—á–µ—Ç–∞
- `general_provisions` - –æ–±—â–∏–µ –ø–æ–ª–æ–∂–µ–Ω–∏—è

## üìà –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¢–µ—Å—Ç–æ–≤

**Batch Test (50 —Ñ–∞–π–ª–æ–≤):**
- –£—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ: 40 (80%)
- –û–¥–æ–±—Ä–µ–Ω–æ —Å 0.00% –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å—é: 1 —Å–º–µ—Ç–∞
- Failed: 10 (20% - –æ—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞)

**–¢–æ—á–Ω–æ—Å—Ç—å:**
- –ù–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö: 100% (0.00%)
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –¥–æ 7 –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≥–æ–¥–∞ –°–¶–ü

## üîß –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **LLM:** Ollama (qwen2.5:7b) - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ç–µ–∫—Å—Ç–∞
- **VLM OCR:** Qwen2-VL / InternVL2 - –≤—ã—Å–æ–∫–æ—Ç–æ—á–Ω–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- **–ë–∞–∑–∞:** MongoDB Atlas - –°–¶–ü 2019-2025
- **API:** FastAPI - REST endpoints
- **AI Framework:** CrewAI - –º—É–ª—å—Ç–∏-–∞–≥–µ–Ω—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
- **PDF Processing:** 
  - tabula-py - –±—ã—Å—Ç—Ä–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
  - VLM OCR - –≤—ã—Å–æ–∫–æ—Ç–æ—á–Ω–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `README.md` - —ç—Ç–æ—Ç —Ñ–∞–π–ª
- `ocr_service/README.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è OCR —Å–µ—Ä–≤–∏—Å–∞
- `FINAL_REPORT.md` - –¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –æ —Ä–∞–±–æ—Ç–µ —Å–∏—Å—Ç–µ–º—ã
- `PDF_ENDPOINT_GUIDE.md` - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∑–∞–≥—Ä—É–∑–∫–µ PDF
- `README_SETUP.md` - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ

## üõ†Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
./status.sh

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏—Å—Ç–µ–º—É
./manage.sh start

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
./manage.sh stop

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
./manage.sh restart

# –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏
./manage.sh logs
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –¢–µ—Å—Ç —Å –∏–¥–µ–∞–ª—å–Ω—ã–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º (0.00%)
python test_with_year_2023.py

# –¢–µ—Å—Ç PDF endpoint
python test_pdf_upload.py path/to/smeta.pdf

# –ü–∞–∫–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
python test_batch.py
```

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.12+
- Java 21+ (–¥–ª—è tabula-py)
- MongoDB Atlas –¥–æ—Å—Ç—É–ø
- Ollama (–¥–ª—è LLM)
- GPU (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è, –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

## üéØ –ê–ª–≥–æ—Ä–∏—Ç–º –†–∞–±–æ—Ç—ã

1. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** (Structurer Agent)
   - –ö–æ–¥ —Ç–∞–±–ª–∏—Ü—ã –°–¶–ü
   - –ù–æ–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏
   - –û–±—ä–µ–º —Ä–∞–±–æ—Ç
   - –ì–æ–¥ –°–¶–ü
   - –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã K3-K7

2. **–ü–æ–∏—Å–∫ –≤ –±–∞–∑–µ** (Auditor Agent)
   - –ü–æ–∏—Å–∫ —Ç–∞–±–ª–∏—Ü—ã –ø–æ –∫–æ–¥—É –∏ –≥–æ–¥—É
   - –ü–æ–∏—Å–∫ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ –Ω–æ–º–µ—Ä—É
   - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ a, b
   - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ K2 –∏–∑ –±–∞–∑—ã

3. **–†–∞—Å—á–µ—Ç –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞** (Calculator)
   - –ë–∞–∑–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: C = a + b √ó V
   - –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤: C √ó K2 √ó K3 √ó K4 √ó ...
   - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –∑–∞—è–≤–ª–µ–Ω–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç—å—é
   - –í–µ—Ä–¥–∏–∫—Ç: –æ–¥–æ–±—Ä–µ–Ω–æ/–Ω–µ –æ–¥–æ–±—Ä–µ–Ω–æ

## üìû API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ: http://127.0.0.1:8000/docs

---

**–í–µ—Ä—Å–∏—è:** 2.0  
**–î–∞—Ç–∞:** 8 –¥–µ–∫–∞–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–π —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏ ‚úÖ
